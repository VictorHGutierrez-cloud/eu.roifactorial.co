<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teste de TraduÃ§Ã£o - Factorial Finance</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .test-section { margin: 20px 0; padding: 20px; border: 1px solid #ccc; border-radius: 8px; }
        .controls { background: #f0f0f0; padding: 15px; border-radius: 8px; margin-bottom: 20px; }
        .controls select { margin: 0 10px; padding: 5px; }
        .result { background: #e8f5e8; padding: 10px; border-radius: 4px; margin: 10px 0; }
    </style>
    <script src="i18n.js"></script>
</head>
<body>
    <h1>ğŸ§ª Teste de Sistema de TraduÃ§Ã£o Universal</h1>
    
    <div class="controls">
        <h3>Controles de Teste:</h3>
        <label for="countrySwitcher">PaÃ­s:</label>
        <select id="countrySwitcher">
            <option value="PT">ğŸ‡µğŸ‡¹ Portugal</option>
            <option value="ES">ğŸ‡ªğŸ‡¸ EspaÃ±a</option>
            <option value="FR">ğŸ‡«ğŸ‡· France</option>
            <option value="DE">ğŸ‡©ğŸ‡ª Deutschland</option>
            <option value="IT">ğŸ‡®ğŸ‡¹ Italia</option>
        </select>
        
        <label for="langSwitcher">Idioma:</label>
        <select id="langSwitcher">
            <option value="pt-PT">PortuguÃªs (PT)</option>
            <option value="pt-BR">PortuguÃªs (BR)</option>
            <option value="en">English</option>
            <option value="es">EspaÃ±ol</option>
            <option value="fr">FranÃ§ais</option>
            <option value="de">Deutsch</option>
            <option value="it">Italiano</option>
        </select>
    </div>

    <div class="test-section">
        <h2>Teste de TraduÃ§Ã£o de Textos</h2>
        <p><strong>TÃ­tulo do Hero:</strong> <span data-i18n="hero.title">Carregando...</span></p>
        <p><strong>SubtÃ­tulo:</strong> <span data-i18n="section1.subtitle">Carregando...</span></p>
        <p><strong>Calculadora:</strong> <span data-i18n="calculator.title">Carregando...</span> <span data-i18n="calculator.subtitle">Carregando...</span></p>
    </div>

    <div class="test-section">
        <h2>Teste de Dados por PaÃ­s</h2>
        <div id="country-data">
            <p><strong>PaÃ­s Atual:</strong> <span id="current-country">Carregando...</span></p>
            <p><strong>Taxas de IVA:</strong></p>
            <div id="vat-rates-display">Carregando...</div>
            <p><strong>Limites de IsenÃ§Ã£o:</strong></p>
            <div id="exemption-limits-display">Carregando...</div>
        </div>
    </div>

    <div class="test-section">
        <h2>Teste de Riscos Fiscais</h2>
        <div id="risks-display">Carregando...</div>
    </div>

    <div class="test-section">
        <h2>InformaÃ§Ãµes de Debug</h2>
        <div id="debug-info">
            <p><strong>PaÃ­s Selecionado:</strong> <span id="debug-country">-</span></p>
            <p><strong>Idioma Selecionado:</strong> <span id="debug-language">-</span></p>
            <p><strong>Dados do PaÃ­s:</strong> <span id="debug-country-data">-</span></p>
        </div>
    </div>

    <script>
        // FunÃ§Ã£o para atualizar informaÃ§Ãµes de debug
        function updateDebugInfo() {
            document.getElementById('debug-country').textContent = window.currentCountry || 'N/A';
            document.getElementById('debug-language').textContent = window.currentLanguage || 'N/A';
            
            if (window.countryData && window.currentCountry) {
                const countryInfo = window.countryData[window.currentCountry];
                document.getElementById('debug-country-data').textContent = JSON.stringify(countryInfo, null, 2);
            }
        }

        // FunÃ§Ã£o para atualizar dados especÃ­ficos do paÃ­s
        function updateCountrySpecificData() {
            if (!window.countryData || !window.currentCountry) return;
            
            const countryInfo = window.countryData[window.currentCountry];
            
            // Atualizar paÃ­s atual
            document.getElementById('current-country').textContent = `${countryInfo.flag} ${countryInfo.name}`;
            
            // Atualizar taxas de IVA
            const vatRatesHtml = countryInfo.regions.map(region => 
                `<div class="result">
                    <strong>${region.name}:</strong> 
                    Normal: ${region.normal}% | 
                    IntermÃ©dia: ${region.intermediate}% | 
                    Reduzida: ${region.reduced}%
                </div>`
            ).join('');
            document.getElementById('vat-rates-display').innerHTML = vatRatesHtml;
            
            // Atualizar limites de isenÃ§Ã£o
            const exemptionHtml = `
                <div class="result">
                    <strong>AlimentaÃ§Ã£o DiÃ¡ria:</strong> 
                    Dinheiro: â‚¬${countryInfo.exemptionLimits.dailyAllowance.cash} | 
                    CartÃ£o: â‚¬${countryInfo.exemptionLimits.dailyAllowance.card}
                </div>
                <div class="result">
                    <strong>Quilometragem:</strong> â‚¬${countryInfo.exemptionLimits.mileage}/km
                </div>
            `;
            document.getElementById('exemption-limits-display').innerHTML = exemptionHtml;
            
            // Atualizar riscos fiscais
            const risksHtml = countryInfo.risks.map(risk => 
                `<div class="result" style="border-left: 4px solid ${risk.color};">
                    <strong>${risk.title}:</strong> ${risk.description}
                </div>`
            ).join('');
            document.getElementById('risks-display').innerHTML = risksHtml;
        }

        // Override das funÃ§Ãµes do i18n.js para adicionar debug
        const originalSetLanguage = window.setLanguage;
        const originalSetCountry = window.setCountry;

        window.setLanguage = function(lang) {
            originalSetLanguage(lang);
            updateDebugInfo();
            updateCountrySpecificData();
        };

        window.setCountry = function(country) {
            originalSetCountry(country);
            updateDebugInfo();
            updateCountrySpecificData();
        };

        // Inicializar quando a pÃ¡gina carregar
        window.addEventListener('DOMContentLoaded', function() {
            setTimeout(() => {
                updateDebugInfo();
                updateCountrySpecificData();
            }, 1000);
        });
    </script>
</body>
</html>